# ----[ general aliases ]-------------------------------------
if [[ "$PLATFORM" == "linux" ]]; then
  alias ifconfig="echo 'no ifconfig!'"
fi

alias jwt='$GOPATH/bin/jwt'
alias mkp='makepasswd --chars=12'
alias s3='s3cmd'
alias tmux='tmux -2'
alias vbm='VBoxManage'
# ------------------------------------------------------------


# ----[ replace sdiff with icdiff ]---------------------------
[ -f $HOME/src/misc/icdiff/icdiff ] && alias sdiff='$HOME/src/misc/icdiff/icdiff'
# ------------------------------------------------------------


# ----[ fwknop ]----------------------------------------------
alias fk='fwknop -A tcp/2222 -w -k'
complete -F _ssh fk
# ------------------------------------------------------------


# ----[ get password tool ]-----------------------------------
function get_password() {
  PASS=$1
  if [ ! -z "$PASS" ]; then
    LINE=$(egrep -n -i "$PASS" ~/mkp.txt)
    echo "$LINE"|sed -e 's/.*\/\s*\([a-z0-9\.]*\)/\1/i' | xsel -b
    echo "$LINE"|sed -e 's/\(.*\)\/\s*[a-z0-9\.]*/\1/i'
  else
    echo "No site!"
  fi
}

alias ggp='get_password'
# ------------------------------------------------------------


# ----[ more advanced git diff/status/log ]-------------------
function git_sdiff() {
  CACHED=$(if [ "$1" = "--cached" ]; then shift; echo "--cached"; fi)

  REVS=$(git rev-parse --revs-only --sq-quote $@)
  FILES=$(git diff --name-only $@)

  for i in $FILES; do
    git difftool $CACHED \
      --no-prompt \
      --extcmd="$HOME/src/misc/icdiff/icdiff -L a/$i -L b/$i" ${REVS} -- $i

    echo -e "\n\n"
  done | less
}

function git_alias() {
  if [ "$1" = "status" ]; then
    shift
    git -c color.status=always status "$@" | less -RFX
  elif [ "$1" = "log" ]; then
    shift
    git log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit "$@"
  elif [ "$1" = "sdiff" ]; then
    shift
    git_sdiff "$@"
  else
    git "$@"
  fi
}

alias git='git_alias'
# ------------------------------------------------------------


# ----[ gop color ]-------------------------------------------
function gop_color() {
  gop $@ |pygmentize -l java -s
}

alias gop='gop_color'
# ------------------------------------------------------------


# ------------------------------------------------------------
alias sha256pwhash='read -s -p "Password: " && P="${REPLY}" && unset REPLY && (echo; read -s -p "Password again: " && (echo; [ "${P}" == "${REPLY}" ] && (echo -n "Hash: "; echo -n "${REPLY}" | sha256sum | sed "s/ .*//")) || echo "Passwords do not match."); unset REPLY; unset P'
# ------------------------------------------------------------


# ----[ go app engine ] --------------------------------------
if [ -e $HOME/src/sdk/go_appengine ]; then
  alias goapp="$HOME/src/sdk/go_appengine/goapp"
  alias appcfg.py="$HOME/src/sdk/go_appengine/appcfg.py"
  alias dev_appserver.py="$HOME/src/sdk/go_appengine/dev_appserver.py"
fi
# ------------------------------------------------------------


# ----[ antlr4 ] ---------------------------------------------
if [ -f $HOME/src/misc/antlr/antlr4/tool/target/antlr4-*-complete.jar ]; then
  alias antlr4="java -Xmx500M -cp $HOME/src/misc/antlr/antlr4/tool/target/antlr4-*-complete.jar org.antlr.v4.Tool"
fi
# ------------------------------------------------------------
